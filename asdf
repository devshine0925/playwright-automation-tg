from telethon import TelegramClient, events
import logging

# Use your own values for these
api_id = 'YOUR_API_ID'
api_hash = 'YOUR_API_HASH'
phone_number = 'YOUR_PHONE_NUMBER'

client = TelegramClient('session_name', api_id, api_hash)

async def click_button(message, button_text):
    """Finds and clicks the button with the specified text in the given message."""
    if message.reply_markup:
        for row in message.reply_markup.rows:
            for button in row.buttons:
                if button.text == button_text:
                    await message.respond(button.data)
                    logging.info(f"Clicked button: {button_text}")
                    return
    logging.warning(f"Button with text '{button_text}' not found.")

@client.on(events.NewMessage(chats='YOUR_BOT_CHANNEL'))
async def handle_new_message(event):
    message = event.message
    if "OrderID" in message.message:  # Example condition to check for specific message
        await click_button(message, "Success")  # Change to "Wrong OTP" if needed

async def main():
    await client.start()
    await client.run_until_disconnected()

if __name__ == '__main__':
    import asyncio
    asyncio.run(main())
