from telethon import TelegramClient, events
import asyncio

# Your API credentials
api_id = 'YOUR_API_ID'
api_hash = 'YOUR_API_HASH'
phone_number = 'YOUR_PHONE_NUMBER'

# Create a new Telegram client
client = TelegramClient('session_name', api_id, api_hash)

async def click_success_button():
    await client.start()
    
    # Replace with the appropriate chat ID or username
    async for message in client.iter_messages('YOUR_TARGET_CHAT_OR_CHANNEL'):
        if "OTP" in message.message:  # Check for the message containing OrderID
            # Iterate through the buttons to find the one with text "Success"
            if message.reply_markup:
                for row in message.reply_markup.rows:
                    for button in row.buttons:
                        if button.text == "Success":
                            # Send the callback data associated with the button
                            await message.respond(button.data)
                            print("Clicked 'Success' button")
                            return

async def main():
    await click_success_button()

if __name__ == '__main__':
    asyncio.run(main())
